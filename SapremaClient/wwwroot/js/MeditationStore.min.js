function setupPage(){var n=url+"GetShopList";$.ajax({type:"GET",url:n,dataType:"json",contentType:"application/json;charset=utf-8"}).done(function(n){displayMeditations(n);originalList=n;console.log(originalList)}).error(function(n,t){$("#store-items").text(n.responseText||t)})}function searchMeditations(){var t,n;searchList=originalList;finalList.length=0;var e,o=$("#MeditationName").val(),i=$("#MediationCreator").val(),r=$("#MeditationTheme").val(),u=$("#MeditationType").val(),f=[o,i,r,u];if(JSON.stringify(["","","",""])!==JSON.stringify(f)){for(t=0;t<f.length;t++)if(f[t]!=="")switch(t){case 0:for(n=0;n<searchList.length;n++)e=searchList[n].MeditationName.includes(o),e===!0&&finalList.push(searchList[n]);break;case 1:if(finalList.length===0)for(n=0;n<searchList.length;n++)searchList[n].MeditationCreator===i&&finalList.push(searchList[n]);else{for(n=0;n<finalList.length;n++)i!==finalList[n].MeditationCreator&&delete finalList[n];finalList=finalList.filter(function(n){return n!==undefined})}break;case 2:if(finalList.length===0)for(n=0;n<searchList.length;n++)searchList[n].MeditationTheme===r&&finalList.push(searchList[n]);else{for(n=0;n<finalList.length;n++)console.log("test"),r!==finalList[n].MeditationTheme&&delete finalList[n];finalList=finalList.filter(function(n){return n!==undefined})}break;case 3:if(finalList.length===0)for(n=0;n<searchList.length;n++)searchList[n].MeditationType===u&&finalList.push(searchList[n]);else{for(n=0;n<finalList.length;n++)u!==finalList[n].MeditationType&&delete finalList[n];finalList=finalList.filter(function(n){return n!==undefined})}}displayMeditations(finalList)}}function displayMeditations(n){for(var u,f,e,i="",r="",t=0;t<n.length;t++){if(e='"'+n[t].MeditationId+'"',nameAutocomplete[t]=n[t].MeditationName,creatorAutocomplete[t]=n[t].MeditationCreator,n[t].MeditationPurchased===!0?(u="Details",f="info"):(u="Buy",f="money"),i="<div class='row'><div class='col-xs-12 col-sm-12 col-md-6 col-lg-6'>"+n[t].MeditationName+"<br />"+n[t].MeditationCreator+"<\/div><div class='col-xs-12 col-sm-12 col-md-3 col-lg-3 store-rating'><fieldset class='rating'><input type='radio' id='star5' name='rating' value='5' disabled /><label class='full' for='star5' title='5 stars'><\/label><input type='radio' id='star4' name='rating' value='4' disabled /><label class='full' for='star4' title='4 stars'><\/label><input type='radio' id='star3' name='rating' value='3' disabled /><label class='full' for='star3' title='3 stars'><\/label><input type='radio' id='star2' name='rating' value='2' disabled /><label class='full' for='star2' title='2 stars'><\/label><input type='radio' id='star1' name='rating' value='1' disabled /><label class='full' for='star1' title='1 star'><\/label><\/fieldset><\/div><div class='col-xs-12 col-sm-12 col-md-1 col-lg-1 text-center review-link'>reviews<\/div><div class='col-xs-12 col-sm-12 col-md-2 col-lg-2 text-center store-details'><button class='btn btn-default button-medium' data-toggle='modal' data-target='#myModal' onclick='meditationModal("+e+","+n[t].MeditationPurchased+")'><i class='fa fa-"+f+"' aria-hidden='true'><\/i> "+u+"<\/button><\/div><\/div><hr />",n[t].MeditationRating!==0){var s=Math.round(n[t].MeditationRating),o="value='"+s+"'",h=o+" checked";i=i.replace(o,h)}r=r+i;JSON.stringify(n[t])}$(".store-items").html(r)}function populateName(){}function populateTheme(){$.ajax({type:"GET",url:urlAPI+"meditation/themes",dataType:"json"}).done(function(n){for(var t=0;t<n.length;t++)$("#MeditationTheme").append("<option value='"+n[t]+"'>"+n[t]+"<\/option>")})}function populateType(){$.ajax({type:"GET",url:urlAPI+"meditation/types",dataType:"json"}).done(function(n){for(var t=0;t<n.length;t++)$("#MeditationType").append("<option value='"+n[t]+"'>"+n[t]+"<\/option>")})}function meditationModal(n,t){$.ajax({type:"GET",url:urlAPI+"meditation/"+n,dataType:"json"}).done(function(i){var s="<span>"+i.MeditationName+"<\/span><br /><span>"+i.MeditationType+"<\/span><br /><span>"+i.MeditationTheme+"<\/span><br /><span>Meditation description goes here<span>",r,u,f,e,o;t===!0?(r="returnMeditation",u="ban",f="Return"):(r="buyMeditation",u="money",f="Buy");e='"'+n+'"';o="<button class='btn btn-default button-medium' data-toggle='modal' data-target='#myModal' onclick='"+r+"("+e+")'><i class='fa fa-"+u+"' aria-hidden='true'><\/i> "+f+"<\/button>";$(".modal-body").html(s);$(".modal-footer").html(o)})}function buyMeditation(n){var t=url+"BuyMeditation/?itemId="+n;$.ajax({type:"GET",url:t,dataType:"json",contentType:"application/json;charset=utf-8"}).done(function(){$("#myModal").modal("hide");setupPage()})}function returnMeditation(n){var t=url+"ReturnMeditation/?itemId="+n;$.ajax({type:"GET",url:t,dataType:"json",contentType:"application/json;charset=utf-8"}).done(function(){$("#myModal").modal("hide");setupPage()})}$(document).ready(function(){setupPage();populateTheme();populateType();$(".modal-title").append("Meditation Details")});var originalList,searchList,finalList=[],themeList,typeList,nameAutocomplete=[],creatorAutocomplete=[],url="http://localhost:5002/Meditation/",urlAPI="http://localhost:5001/api/";